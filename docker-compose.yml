version: '3'
services:
    phone:
        build:
            context: ./
            dockerfile: ./phone-app/Dockerfile
            environment:
                - EXPO_DEVTOOLS_LISTEN_ADDRESS=0.0.0.0
                - REACT_NATIVE_PACKAGER_HOSTNAME=${IP}
            volumes:
                - ./phone-app/:/phone-app/
            ports:
                - '8081:8081'
                - '8082:8082'
                - '8083:8083'
            tty: true
            stdin_open: true
            command: npx expo start --clear
    # express:
    #         build:
    #             context: ./
    #             dockerfile: ./backtest/Dockerfile
    #         volumes:
    #             - ./backtest/:/backtest/
    #         ports:
    #             - '3000:3000'
    #         command: node app.js
    server:
        build:
            context: ./
            dockerfile: ./backend/Dockerfile
        volumes:
            - ./backend/db:/server/db
        ports:
            - "1337:1337"
        command: node server.js
