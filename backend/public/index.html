<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Bike rental API</title>
        <link rel="icon" href="img/scooter64.png">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <main>
            <img id="scooter" src="img/scooter128.png" width="128" height="128" alt="A scooter">
            <h1>Bike rental API specification</h1>
            <h2>List of all endpoints</h2>
            <p>All endpoints to be prepended by /api/v1.

            <h3>üèô <a href="#cities">Cities</a></h3>
            <ul>
                <li><a href="#get-cities">GET /cities</a></li>
                <li><a href="#get-cities-id">GET /cities/{id}</a></li>
                <li><a href="#post-cities">POST /cities</a></li>
                <li><a href="#put-cities">PUT /cities</a></li>
                <li><a href="#delete-cities-id">DELETE /cities/{id}</a></li>
            </ul>

            <h3>üßç <a href="#users">Users</a></h3>
            <ul>
                <li><a href="#get-users">GET /users</a></li>
                <li><a href="#get-users-id">GET /users/{id}</a></li>
                <li><a href="#post-users">POST /users</a></li>
                <li><a href="#put-users">PUT /users</a></li>
                <li><a href="#put-users-withdraw">PUT /users/withdraw</a></li>
                <li><a href="#delete-users-id">DELETE /users/{id}</a></li>
            </ul>

            <h3>üõ¥ <a href="#bikes">Bikes</a></h3>
            <ul>
                <li><a href="#get-bikes-city">GET /bikes/city/{city_id}</a></li>
                <li><a href="#get-bikes-city-status">GET /bikes/city/{city_id}/status/{status_id}</a></li>
                <li><a href="#get-bikes-id">GET /bikes/{id}</a></li>
                <li><a href="#get-bikes-user">GET /bikes/user/{user_id}</a></li>
                <li><a href="#post-bikes">POST /bikes</a></li>
                <li><a href="#put-bikes">PUT /bikes</a></li>
                <li><a href="#put-bikes-user-status">PUT /bikes/user_status</a></li>
                <li><a href="#put-bikes-pos-speed-batt">PUT /bikes/pos_speed_batt</a></li>
                <li><a href="#delete-bikes-id">DELETE /bikes/{id}</a></li>
            </ul>

            <section>
                <h2 id="cities">üèô Cities</h2>
                <h3 id="get-cities">GET /cities</h3>
                <p>Get a JSON-representation of all cities.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/cities</code></pre>

                <h4>Response</h4>
                <pre><code>[
    {
        "id": 1,
        "name": "Karlskrona",
        "lat": 56.193,
        "lon": 15.628,
        "dlat": 0.02,
        "dlon": 0.03
    },
    {
        "id": 2,
        "name": "Stockholm",
        "lat": 59.325,
        "lon": 18.071,
        "dlat": 0.08,
        "dlon": 0.2
    }
]

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>dlat</code> and <code>dlon</code> denote city extension northwards and eastwards respectively.</p>

                <h3 id="get-cities-id">GET /cities/{id}</h3>
                <p>Get a JSON-representation of a specific city.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/cities/1</code></pre>

                <h4>Response</h4>
                <pre><code>{
    "id": 1,
    "name": "Karlskrona",
    "lat": 56.193,
    "lon": 15.628,
    "dlat": 0.02,
    "dlon": 0.03
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>dlat</code> and <code>dlon</code> denote city extension northwards and eastwards respectively.</p>

                <h3 id="post-cities">POST /cities</h3>
                <p>Add a new city.</p>

                <h4>Sample request</h4>
                <pre><code>POST /api/v1/cities</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>name
lat  = latitude
lon  = longitude
dlat = north-south extension of city (‚âàradius)
dlon = east-west extension of city (‚âàradius)</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "newId": 3,
    "message": "Ok"
}

HTTP Status Code: 201 Created</code></pre>
                <p><b>Note:</b> <code>count</code> is inserted row count and <code>newId</code> is the id of added city.</p>

                <h4>Response (failure, name already exists)</h4>
                <pre><code>{
    "count": 0,
    "newId": -1,
    "message": "UNIQUE constraint failed: cities.name"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="put-cities">PUT /cities</h3>
                <p>Update a city.</p>

                <h4>Sample request</h4>
                <pre><code>PUT /api/v1/cities</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>id   = city id to update
name = new name
lat  = latitude
lon  = longitude
dlat = north-south extension of city (‚âàradius)
dlon = east-west extension of city (‚âàradius)</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is updated row count.</p>

                <h4>Response (failure, name already exists)</h4>
                <pre><code>{
    "count": 0,
    "message": "UNIQUE constraint failed: cities.name"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="delete-cities-id">DELETE /cities/{id}</h3>
                <p>Delete a city.</p>

                <h4>Sample request</h4>
                <pre><code>DELETE /api/v1/cities/1</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is deleted row count.</p>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

            </section>

            <section>
                <h2 id="users">üßç Users</h2>
                <h3 id="get-users">GET /users</h3>
                <p>Get a JSON-representation of all users.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/users</code></pre>

                <h4>Response</h4>
                <pre><code>[
    {
        "id": 2,
        "name": "Jane Doe"
    },
    {
        "id": 1,
        "name": "John Doe"
    }
]

HTTP Status Code: 200 OK</code></pre>

                <h3 id="get-users-id">GET /users/{id}</h3>
                <p>Get a JSON-representation of a specific user.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/users/2</code></pre>

                <h4>Response</h4>
                <pre><code>{
    "id": 2,
    "name": "Jane Doe",
    "balance": 50,
    "bank_account": "1.45.6789",
    "recurring_withdraw": 150
}

HTTP Status Code: 200 OK</code></pre>

                <h3 id="post-users">POST /users</h3>
                <p>Add a new user.</p>

                <h4>Sample request</h4>
                <pre><code>POST /api/v1/users</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>name
balance            = account balance
bank_account
recurring_withdraw = amount to withdraw from bank and add to<br>    account each month</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "newId": 1,
    "message": "Ok"
}

HTTP Status Code: 201 Created</code></pre>
                <p><b>Note:</b> <code>count</code> is inserted row count and <code>newId</code> is the id of added user.</p>

                <h4>Response (failure, name already exists)</h4>
                <pre><code>{
    "count": 0,
    "newId": -1,
    "message": "UNIQUE constraint failed: users.name"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="put-users">PUT /users</h3>
                <p>Update a user.</p>

                <h4>Sample request</h4>
                <pre><code>PUT /api/v1/users</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>id      = user id to update
name    = new name
balance = account balance
bank_account
recurring_withdraw = amount to withdraw from bank and add to<br>    account each month</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is updated row count.</p>

                <h4>Response (failure, name already exists)</h4>
                <pre><code>{
    "count": 0,
    "message": "UNIQUE constraint failed: users.name"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="put-users-withdraw">PUT /users/withdraw</h3>
                <p>Withdraw (or deposit) an amount from a user's balance.</p>

                <h4>Sample request</h4>
                <pre><code>PUT /api/v1/users/withdraw</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>id     = user id to update
amount = a positive amount to withdraw, negative to deposit</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is updated row count.</p>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="delete-users-id">DELETE /users/{id}</h3>
                <p>Delete a user.</p>

                <h4>Sample request</h4>
                <pre><code>DELETE /api/v1/users/1</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is deleted row count.</p>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

            </section>

            <section>
                <h2 id="bikes">üõ¥ Bikes</h2>
                <h3 id="get-bikes-city">GET /bikes/city/{city_id}</h3>
                <p>Get a JSON-representation of all bikes in a city.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/bikes/city/1</code></pre>

                <h4>Response</h4>
                <pre><code>[
    {
        "id": 1,
        "city_id": 1,
        "user_id": 1,
        "status_id": 1,
        "lat": 56.2,
        "lon": 15.63,
        "speed": 15,
        "battery": 80
    },
    {
        "id": 2,
        "city_id": 1,
        "user_id": 2,
        "status_id": 1,
        "lat": 56.21,
        "lon": 15.62,
        "speed": 18,
        "battery": 55
    }
]

HTTP Status Code: 200 OK</code></pre>

                <h3 id="get-bikes-city-status">GET /bikes/city/{city_id}/status/{status_id}</h3>
                <p>Get a JSON-representation of all bikes with a given status_id in a city.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/bikes/city/1/status/1</code></pre>

                <h4>Response</h4>
                <pre><code>[
    {
        "id": 1,
        "city_id": 1,
        "user_id": 1,
        "status_id": 1,
        "lat": 56.2,
        "lon": 15.63,
        "speed": 15,
        "battery": 80
    },
    {
        "id": 2,
        "city_id": 1,
        "user_id": 2,
        "status_id": 1,
        "lat": 56.21,
        "lon": 15.62,
        "speed": 18,
        "battery": 55
    }
]

HTTP Status Code: 200 OK</code></pre>

                <h3 id="get-bikes-id">GET /bikes/{id}</h3>
                <p>Get a JSON-representation of a specific bike.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/bikes/2</code></pre>

                <h4>Response</h4>
                <pre><code>{
    "id": 2,
    "city_id": 1,
    "user_id": 2,
    "status_id": 1,
    "lat": 56.21,
    "lon": 15.62,
    "speed": 18,
    "battery": 55
}

HTTP Status Code: 200 OK</code></pre>

                <h3 id="get-bikes-user">GET /bikes/user/{user_id}</h3>
                <p>Get a JSON-representation of a bike rent by a user.</p>

                <h4>Sample request</h4>
                <pre><code>GET /api/v1/bikes/user/1</code></pre>

                <h4>Response</h4>
                <pre><code>{
    "id": 1,
    "city_id": 1,
    "user_id": 1,
    "status_id": 1,
    "lat": 56.2,
    "lon": 15.63,
    "speed": 15,
    "battery": 80
}

HTTP Status Code: 200 OK</code></pre>

                <h3 id="post-bikes">POST /bikes</h3>
                <p>Add a new bike.</p>

                <h4>Sample request</h4>
                <pre><code>POST /api/v1/bikes</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>city_id
user_id   = (0=free, no user)
status_id = (0=free, 1=leased, 2=off, 3=charging, ...)
lat       = latitude
lon       = longitude
speed     = (km/h)
battery   = 0-100</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "newId": 3,
    "message": "Ok"
}

HTTP Status Code: 201 Created</code></pre>
                <p><b>Note:</b> <code>count</code> is inserted row count and <code>newId</code> is the id of added bike.</p>

                <h3 id="put-bikes">PUT /bikes</h3>
                <p>Update all properties of a bike.</p>

                <h4>Sample request</h4>
                <pre><code>PUT /api/v1/bikes</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>id        = bike id to update
city_id
user_id   = (0=free, no user)
status_id = (0=free, 1=leased, 2=off, 3=charging, ...)
lat       = latitude
lon       = longitude
speed     = (km/h)
battery   = 0-100</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is updated row count.</p>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="put-bikes-user-status">PUT /bikes/user_status</h3>
                <p>Update a bike's user and status.</p>

                <h4>Sample request</h4>
                <pre><code>PUT /api/v1/bikes/user_status</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>id        = bike id to update
user_id   = (0=free, no user)
status_id = (0=free, 1=leased, 2=off, 3=charging, ...)</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is updated row count.</p>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="put-bikes-pos-speed-batt">PUT /bikes/pos_speed_batt</h3>
                <p>Update a bike's position, speed and battery.</p>

                <h4>Sample request</h4>
                <pre><code>PUT /api/v1/bikes/pos_speed_batt</code></pre>

                <h4>Required body keys<br>
                <small>(currently x-www-form-urlencoded)</small></h4>
                <pre><code>id        = bike id to update
lat       = latitude
lon       = longitude
speed     = (km/h)
battery   = 0-100</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is updated row count.</p>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

                <h3 id="delete-bikes-id">DELETE /bikes/{id}</h3>
                <p>Delete a bike.</p>

                <h4>Sample request</h4>
                <pre><code>DELETE /api/v1/bikes/1</code></pre>

                <h4>Response (success)</h4>
                <pre><code>{
    "count": 1,
    "message": "Ok"
}

HTTP Status Code: 200 OK</code></pre>
                <p><b>Note:</b> <code>count</code> is deleted row count.</p>

                <h4>Response (failure, id not found)</h4>
                <pre><code>{
    "count": 0,
    "message": "id not found"
}

HTTP Status Code: 400 Bad Request</code></pre>

            </section>
        </main>

        <footer>
            <p>&copy; Vteam 2023 Group 8</p>
        </footer>
    </body>
</html>
